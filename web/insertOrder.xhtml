<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core">
    <head>

        <title>Insert order</title>

    </head>

  <body>
        <h1>New Order</h1>
        Opened: #{registeredUserController.currentOrder.placed}
        #{registeredUserController.currentOrder.customer.firstName}
        <f:view>
            <h:form>
                <table>
                    <tr>
                        <th>Product</th>
                        <th>UnitPrice</th>
                        <th>Quantity</th>-->
                        <th>Sub Total</th>
                    </tr>
                    <ui:repeat var="ol" value="#{registeredUserController.currentOrder.items}">
                        <tr>
                            <td>#{ol.product.name}</td>
                            <td>#{ol.unitPrice}</td>
                            <td>#{ol.quantity}</td>
                            <td>#{ol.subTotal}</td>
                        </tr>
                    </ui:repeat>
                </table>
                <br/>

                <h1>Total: </h1> #{registeredUserController.currentOrder.total}
                <br/>
                Add another item:

                <label>Product Code:-->
                    <h:inputText value="#{registeredUserController.productCode}"
                                 required="true"
                                 requiredMessage="Code is mandatory"
                            /></label>
                <label>Quantity:
                    <h:inputText value="#{registeredUserController.quantity}"/>
                </label>
                <h:commandButton value="Add" action="#{registeredUserController.addToOrder}" class="btn btn-default"/>

                <br/>
                <br/>
                <h:commandButton value="Close Order" action="#{registeredUserController.currentOrder.dispatchOrder}" class="btn btn-default"/>
            </h:form>
        </f:view>
  </body>
</html>
